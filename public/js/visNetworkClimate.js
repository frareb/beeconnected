!function(t){function e(e){for(var n,d,i=e[0],l=e[1],u=e[2],c=0,p=[];c<i.length;c++)d=i[c],Object.prototype.hasOwnProperty.call(o,d)&&o[d]&&p.push(o[d][0]),o[d]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);for(s&&s(e);p.length;)p.shift()();return r.push.apply(r,u||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,i=1;i<a.length;i++){var l=a[i];0!==o[l]&&(n=!1)}n&&(r.splice(e--,1),t=d(d.s=a[0]))}return t}var n={},o={2:0},r=[];function d(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,d),a.l=!0,a.exports}d.m=t,d.c=n,d.d=function(t,e,a){d.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},d.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},d.t=function(t,e){if(1&e&&(t=d(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(d.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)d.d(a,n,function(e){return t[e]}.bind(null,n));return a},d.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return d.d(e,"a",e),e},d.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},d.p="";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var s=l;r.push([165,0]),a()}({165:function(t,e,a){"use strict";a.r(e);var n=a(45),o=a.n(n),r=a(100),d=a.n(r),i=a(60),l=Math.round(.7*window.innerHeight)+"px";document.getElementById("mynetwork").style.height=l;const u=[{id:0,value:15,label:"Main server",color:"#653356ff"}],s=[],c=new i.a(u),p=new i.a(s),f=document.getElementById("mynetwork"),g={nodes:c,edges:p},m=new i.b(f,g,{nodes:{shape:"dot"},interaction:{hover:!0}}),b=document.getElementById("networkWait");b.textContent=" Please wait, data is being loaded...";o.a.getJSON("/institutes?page_size=1000",(function(t){for(let e=0;e<t.data.length;e++)u.push({id:"i"+t.data[e].id,value:10,label:t.data[e].name,title:`id: ${t.data[e].id}</br>name: ${t.data[e].name}</br>countryCode: ${t.data[e].countryCode}</br>url: <a href="${t.data[e].url}">${t.data[e].url}</a>`,color:"#6B5CA5"}),s.push({from:0,to:"i"+t.data[e].id});o.a.getJSON("/gateways?page_size=1000",(function(t){for(let e=0;e<t.data.length;e++)u.push({id:"g"+t.data[e].id,value:7,label:t.data[e].name,title:`id: ${t.data[e].id}</br>instituteId: ${t.data[e].instituteId}</br>name: ${t.data[e].name}</br>url: <a href="${t.data[e].url}">${t.data[e].url}</a>`,color:"#71A9F7"}),s.push({from:"i"+t.data[e].instituteId,to:"g"+t.data[e].id});g.nodes.update(u),g.edges.update(s);o.a.getJSON("/sensors?page_size=1000",(function(t){for(let e=0;e<t.data.length;e++){const a=[],n=[],r=Date.now(),d=r-432e5,i=`/Sensors/${t.data[e].id}/datas?start=${d}&end=${r}`;o.a.getJSON(i,(function(o){let r="no data",d="#FF8C61",i="";o.data.length>2&&(r=Math.round(10*o.data[0].value)/10,d="#6ae35d",i=o.data[0].createdAt),a.push({id:"s"+t.data[e].id,value:5,label:t.data[e].name,color:d,title:`Last read in UTC: <b>${r}${t.data[e].unit}</b></br>${i}</br>id: ${t.data[e].id}</br>gatewayId: ${t.data[e].gatewayId}</br>name: ${t.data[e].name}</br>unit: ${t.data[e].unit}</br>model: ${t.data[e].model}</br>description: ${t.data[e].description}</br>url: <a href="${t.data[e].url}">${t.data[e].url}</a>`,shape:"TRAP"==t.data[e].name?"triangle":"dot"}),n.push({from:"g"+t.data[e].gatewayId,to:"s"+t.data[e].id}),g.nodes.update(a),g.edges.update(n)})).done((function(){b.textContent=""}))}}))}))})),m.on("click",(function(t){const e=this.getNodeAt(t.pointer.DOM),a=c.get(e);if(void 0!==e&&e.startsWith("s")&&"#6ae35d"==a.color){!function(t){const e=Date.now(),a=`/Sensors/${t}/datas?start=${e-432e5}&end=${e}`,n=[],o=[];d.a.d3.json(a,(function(t,e){if(e.data.length>1){for(let t=0;t<e.data.length;t++)n.push(new Date(e.data[t].createdAt)),o.push(e.data[t].value);const t={autosize:!0,margin:{l:0,r:0,b:0,t:0,pad:4},showlegend:!1,xaxis:{automargin:!0,autorange:!0,type:"date"},yaxis:{automargin:!0,hoverformat:".1f"}},a={responsive:!0},r={line:{color:"#17BECF"},x:n,y:o};d.a.newPlot(document.getElementById("PopUp"),[r],t,a)}else document.getElementById("PopUp").innerHTML="",console.log("no data")}))}(e.replace("s","")),function(t){let e,a,n;e=document.getElementById("PopUp"),window.event?(a=window.event.clientX+document.documentElement.scrollLeft+document.body.scrollLeft,n=window.event.clientY+document.documentElement.scrollTop+document.body.scrollTop):(a=t.clientX+window.scrollX,n=t.clientY+window.scrollY);a-=2,n-=2,n+=15,e.style.left=a+"px",e.style.top=n+"px",e.style.display="block"}(event)}})),m.on("hoverNode",(function(){})),m.on("blurNode",(function(){}))}});